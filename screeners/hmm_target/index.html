
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Python-based Feature Screening library">
      
      
      
        <link rel="canonical" href="https://narrowgateai.github.io/screeners/hmm_target/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.2.5">
    
    
      
        <title>HMMTargetLinkScreener - narrowgate</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2d9f7617.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/material.css">
    
      <link rel="stylesheet" href="../../css/mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="purple">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#narrowgate.screeners.HMMTargetLinkScreener" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="narrowgate" class="md-header__button md-logo" aria-label="narrowgate" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 21V7H5v4H3V9H1v12h2v-2h2v2h2m-4-4v-4h2v4H3m18-8v2h-2V7h-2v14h2v-2h2v2h2V9h-2m0 8h-2v-4h2v4z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            narrowgate
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              HMMTargetLinkScreener
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="lime"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/narrowgateai/narrowgate/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    narrowgateai/narrowgate
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="narrowgate" class="md-nav__button md-logo" aria-label="narrowgate" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 21V7H5v4H3V9H1v12h2v-2h2v2h2m-4-4v-4h2v4H3m18-8v2h-2V7h-2v14h2v-2h2v2h2V9h-2m0 8h-2v-4h2v4z"/></svg>

    </a>
    narrowgate
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/narrowgateai/narrowgate/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    narrowgateai/narrowgate
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Screeners
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Screeners" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Screeners
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1">
          Univariate
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Univariate" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          Univariate
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../univariate/" class="md-nav__link">
        UnivariateScreener
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/univariate_screener/" class="md-nav__link">
        Example
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2">
          Bivariate
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Bivariate" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Bivariate
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../bivariate/" class="md-nav__link">
        BivariateScreener
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_3">
          FSCA
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="FSCA" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          FSCA
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fsca/" class="md-nav__link">
        FSCA
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fsca_selector/" class="md-nav__link">
        FSCASelector
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fsca_transformer/" class="md-nav__link">
        FSCATransformer
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_4" type="checkbox" id="__nav_2_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2_4">
          Hidden Markov Model
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Hidden Markov Model" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          Hidden Markov Model
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          HMMTargetLinkScreener
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        HMMTargetLinkScreener
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#narrowgate.screeners.HMMTargetLinkScreener" class="md-nav__link">
    HMMTargetLinkScreener
  </a>
  
    <nav class="md-nav" aria-label="HMMTargetLinkScreener">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#narrowgate.screeners.HMMTargetLinkScreener--references" class="md-nav__link">
    References
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener.screen" class="md-nav__link">
    screen()
  </a>
  
    <nav class="md-nav" aria-label="screen()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener.screen--warning" class="md-nav__link">
    Warning
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener.mcpt_report" class="md-nav__link">
    mcpt_report()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener.print_model_report" class="md-nav__link">
    print_model_report()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener._generate_mcpt_report" class="md-nav__link">
    _generate_mcpt_report()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener._generate_means_std_report" class="md-nav__link">
    _generate_means_std_report()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener._generate_transition_report" class="md-nav__link">
    _generate_transition_report()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener._generate_target_stats_report" class="md-nav__link">
    _generate_target_stats_report()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hmm_memory/" class="md-nav__link">
        HMMMemoryScreener
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_5" type="checkbox" id="__nav_2_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_5">
          Stepwise
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Stepwise" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_5">
          <span class="md-nav__icon md-icon"></span>
          Stepwise
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../stepwise/" class="md-nav__link">
        EnhancedStepwiseScreener
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../stepwise_selector/" class="md-nav__link">
        EnhancedStepwiseSelector
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Encoders
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Encoders" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Encoders
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1">
          Nominal2Ordinal
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Nominal2Ordinal" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          Nominal2Ordinal
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../encoders/nom_ord/" class="md-nav__link">
        Nominal2OrdinalEncoder
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/nominal2ordinal/" class="md-nav__link">
        Example
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Models
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Models" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Models
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1" type="checkbox" id="__nav_4_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_1">
          LinearRegression (Numba)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="LinearRegression (Numba)" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          LinearRegression (Numba)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../models/linear_regression/" class="md-nav__link">
        LinearRegression_nb
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_2">
          Hidden Markov Model (Numba)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Hidden Markov Model (Numba)" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Hidden Markov Model (Numba)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../models/hmm/" class="md-nav__link">
        HMM_nb
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Model Selection
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Model Selection" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Model Selection
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1" type="checkbox" id="__nav_5_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_1">
          Walk-Backward Time Series CV
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Walk-Backward Time Series CV" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_1">
          <span class="md-nav__icon md-icon"></span>
          Walk-Backward Time Series CV
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../model_selection/walk_backward/" class="md-nav__link">
        WalkBackwardTimeSeriesCV
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2" type="checkbox" id="__nav_5_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_2">
          Combinatorially Purged CV
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Combinatorially Purged CV" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          Combinatorially Purged CV
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../model_selection/cpcv/" class="md-nav__link">
        CombinatorialPurgedCrossValidation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Utilities
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Utilities" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Utilities
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1" type="checkbox" id="__nav_6_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_1">
          Metrics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Metrics" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_1">
          <span class="md-nav__icon md-icon"></span>
          Metrics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/metrics_cpu/" class="md-nav__link">
        CPU
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/metrics_gpu/" class="md-nav__link">
        GPU
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_2" type="checkbox" id="__nav_6_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_2">
          Partitioning
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Partitioning" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_2">
          <span class="md-nav__icon md-icon"></span>
          Partitioning
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/partition_cpu/" class="md-nav__link">
        CPU
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/partition_gpu/" class="md-nav__link">
        GPU
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_3" type="checkbox" id="__nav_6_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_3">
          Sorting
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Sorting" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_3">
          <span class="md-nav__icon md-icon"></span>
          Sorting
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/sort_cpu/" class="md-nav__link">
        CPU
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/sort_gpu/" class="md-nav__link">
        GPU
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/stats/" class="md-nav__link">
        Statistics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/validation/" class="md-nav__link">
        Validation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/test/" class="md-nav__link">
        Testing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/cluster/" class="md-nav__link">
        Cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/pca/" class="md-nav__link">
        PCA
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/numba/" class="md-nav__link">
        Numba
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#narrowgate.screeners.HMMTargetLinkScreener" class="md-nav__link">
    HMMTargetLinkScreener
  </a>
  
    <nav class="md-nav" aria-label="HMMTargetLinkScreener">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#narrowgate.screeners.HMMTargetLinkScreener--references" class="md-nav__link">
    References
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener.screen" class="md-nav__link">
    screen()
  </a>
  
    <nav class="md-nav" aria-label="screen()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener.screen--warning" class="md-nav__link">
    Warning
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener.mcpt_report" class="md-nav__link">
    mcpt_report()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener.print_model_report" class="md-nav__link">
    print_model_report()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener._generate_mcpt_report" class="md-nav__link">
    _generate_mcpt_report()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener._generate_means_std_report" class="md-nav__link">
    _generate_means_std_report()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener._generate_transition_report" class="md-nav__link">
    _generate_transition_report()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener._generate_target_stats_report" class="md-nav__link">
    _generate_target_stats_report()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/narrowgateai/narrowgate/edit/master/docs/screeners/hmm_target.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>



  <h1>HMMTargetLinkScreener</h1>

<div class="doc doc-object doc-class">



<h2 id="narrowgate.screeners.HMMTargetLinkScreener" class="doc doc-heading">
          <code>HMMTargetLinkScreener</code>



<a href="#narrowgate.screeners.HMMTargetLinkScreener" class="headerlink" title="Permanent link">¤</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">HMMTargetLinkScreener</span><span class="p">(</span>
    <span class="n">nvars</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">nstates</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">n_init</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">max_iter</span><span class="o">=</span><span class="mi">100</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">


      <p>Hidden Markov Model Target-Linked screening class.</p>
<p>Rather than using raw feature values as inputs to a predictive model like 
<a class="autorefs autorefs-internal" href="../univariate/#narrowgate.screeners.univariate.base.UnivariateScreener">UnivariateScreener</a> and 
<a class="autorefs autorefs-internal" href="../bivariate/#narrowgate.screeners.BivariateScreener">BivariateScreener</a>, this
screener attempts to use the underlying <strong>state</strong> of the feature-generating
process as input to a model attempting to predict a target variable.  </p>
<p>The 'state' mentioned above is produced by a 
<a class="autorefs autorefs-internal" href="../../models/hmm/#narrowgate.model.hidden_markov_model.HMM_nb">hidden Markov model</a> which
presents a set of multiple state probabilities at each observation. These
state probabilities attempt to properly identify the likelihood of the 
features (and resulting model) being in one state versus another. 
The number of potential states is posited by the user as an input parameter 
to the screener (<code>nstates</code>). These states can ultimately be thought of as 
impacting the distribution of the associated raw features used as input 
data into the hidden Markov model.</p>
<p>The execution steps for this screener are as follows:  </p>
<ol>
<li>Hidden Markov model is fit to one or more sets of features <strong>independent 
of the target variable</strong></li>
<li>The matrix of state probabilities from above are fit to a target variable
with a <a class="autorefs autorefs-internal" href="../../models/linear_regression/#narrowgate.model.linear_model.LinearRegression_nb">Linear Regression model</a></li>
<li>Monte Carlo Permutation testing is performed with a Linear regression
model using the original state probabilities and a permuted target variable.
A null hypothesis test is performed against a random relationship existing 
between the states and the target variable. </li>
</ol>
<h4 id="narrowgate.screeners.HMMTargetLinkScreener--references">References<a class="headerlink" href="#narrowgate.screeners.HMMTargetLinkScreener--references" title="Permanent link">¤</a></h4>
<p>Masters, Timothy. (2019) "Extracting and Selecting Features for Data 
Mining: Algorithms in C++ and CUDA". pp. 164-188.</p>


      <p>Hidden Markov Model requires a minimum of 2 variables and 2 states to 
be used when creating the model.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>nvars</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
          </td>
          <td><p>number of features/columns to combine when constructing a hidden 
Markov model.<br />
Must be 2 or greater.<br />
Recommend value : 2 to 5</p></td>
          <td>
                <code>2</code>
          </td>
        </tr>
        <tr>
          <td><code>nstates</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
          </td>
          <td><p>The number of hidden states for the model to posit.<br />
Must be greater than or equal to 2.<br />
More than 4 states can produce unstable results.</p></td>
          <td>
                <code>3</code>
          </td>
        </tr>
        <tr>
          <td><code>n_init</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
          </td>
          <td><p>Number of initial trial parameter sets to test for finding a
good stating point to begin model convergence.  Larger values make 
it more likely that the iterations, which always converge to a local 
optimum, will find the global optimum.<br />
Recommended: minimum of 1000 with a value of 10,000 not being 
unreasonable.</p></td>
          <td>
                <code>1000</code>
          </td>
        </tr>
        <tr>
          <td><code>max_iter</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
          </td>
          <td><p>The number of iterations to perform for finding the maximum 
likelihood parameters of the model. If the model converges prior 
to this number, early stopping will occur. If the method completes
and the return value of <code>n_iter</code> is <code>max_iter-1</code>, then complete
convergence was not obtained.</p></td>
          <td>
                <code>100</code>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>narrowgate/screeners/hmm/target_link.py</code></summary>
              <table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">nvars</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">nstates</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
    <span class="n">n_init</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="n">max_iter</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Hidden Markov Model requires a minimum of 2 variables and 2 states to </span>
<span class="sd">    be used when creating the model.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    nvars : </span>
<span class="sd">        number of features/columns to combine when constructing a hidden </span>
<span class="sd">        Markov model.  </span>
<span class="sd">        Must be 2 or greater.  </span>
<span class="sd">        Recommend value : 2 to 5</span>
<span class="sd">    nstates : </span>
<span class="sd">        The number of hidden states for the model to posit.  </span>
<span class="sd">        Must be greater than or equal to 2.  </span>
<span class="sd">        More than 4 states can produce unstable results.</span>
<span class="sd">    n_init : </span>
<span class="sd">        Number of initial trial parameter sets to test for finding a</span>
<span class="sd">        good stating point to begin model convergence.  Larger values make </span>
<span class="sd">        it more likely that the iterations, which always converge to a local </span>
<span class="sd">        optimum, will find the global optimum.  </span>
<span class="sd">        Recommended: minimum of 1000 with a value of 10,000 not being </span>
<span class="sd">        unreasonable.</span>
<span class="sd">    max_iter : </span>
<span class="sd">        The number of iterations to perform for finding the maximum </span>
<span class="sd">        likelihood parameters of the model. If the model converges prior </span>
<span class="sd">        to this number, early stopping will occur. If the method completes</span>
<span class="sd">        and the return value of `n_iter` is `max_iter-1`, then complete</span>
<span class="sd">        convergence was not obtained. </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="n">nvars</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;&#39;nvars&#39; parameter must be &gt; 1&quot;</span>
    <span class="k">assert</span> <span class="n">nstates</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;&#39;n_states&#39; parameter must be &gt; 1&quot;</span>
    <span class="k">assert</span> <span class="n">n_init</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;&#39;n_init&#39; parameter must be &gt; 0&quot;</span>
    <span class="k">assert</span> <span class="n">max_iter</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;&#39;max_iter&#39; parameter must be &gt; 0&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">nstates</span> <span class="o">=</span> <span class="n">nstates</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">n_init</span> <span class="o">=</span> <span class="n">n_init</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">max_iter</span> <span class="o">=</span> <span class="n">max_iter</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">nvars</span> <span class="o">=</span> <span class="n">nvars</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">model_cols</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">state_probs_mat</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">transition_mat</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">crits</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">solo_pval</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">unbiased_pval</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>
</td></tr></table>
            </details>



  <div class="doc doc-children">


















  <div class="doc doc-object doc-function">



<h3 id="narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener.screen" class="doc doc-heading">
screen


<a href="#narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener.screen" class="headerlink" title="Permanent link">¤</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">screen</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">nreps</span><span class="p">,</span> <span class="n">mcpt_type</span><span class="o">=</span><span class="s1">&#39;complete&#39;</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Method that performs the target-linked screening of the hidden Markov
model states produced by the feature combinations. </p>
<p>Executes the Monte Carlo Permutation testing as part of the evaluation </p>
<h6 id="narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener.screen--warning">Warning<a class="headerlink" href="#narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener.screen--warning" title="Permanent link">¤</a></h6>
<p>NaN values must not be present in 'X'.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>X</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="pandas" href="http://pandas.pydata.org/pandas-docs/stable/index.html#module-pandas">pd</a>.<a class="autorefs autorefs-external" title="pandas.DataFrame" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame">DataFrame</a></code>
          </td>
          <td><p>pandas DataFrame of time series features to combine when estimating
hidden Markov models.<br />
<strong>Must NOT contain NaN values</strong></p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>y</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="pandas" href="http://pandas.pydata.org/pandas-docs/stable/index.html#module-pandas">pd</a>.<a class="autorefs autorefs-external" title="pandas.Series" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.html#pandas.Series">Series</a></code>
          </td>
          <td><p>pandas Series containing the target values to predict.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>nreps</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
          </td>
          <td><p>number of Monte Carlo permutation testing repititions to peform</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>mcpt_type</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
          </td>
          <td><p>Valid options: </p>
<ul>
<li><strong>"complete"</strong></li>
<li><strong>"cyclic"</strong></li>
</ul>
<p>Type of permutation to perform on the target variable when evaluating
the confidence that a predictor variable's relationship with the target 
variable is non-random in nature.  </p>
<p><strong>"complete"</strong>: shuffles the target variable values  </p>
<p><strong>"cyclic"</strong>: used when target variable possesses serial correlation. 
Chooses a random row and copies the original target variable values in 
sequence beginning at this row. Excess target values are then 'wrapped' 
to first row in the dataset such that the last original target variable 
value will be located in the position just prior to the chosen random 
row.</p></td>
          <td>
                <code>&#34;complete&#34;</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>state_probs_mat</code></td>
          <td>
                <code>np.ndarray</code>
          </td>
          <td><p>numpy matrix containing the state probabilities of all possible 
feature/variable combinations</p></td>
        </tr>
        <tr>
          <td><code>transition_mat</code></td>
          <td>
                <code>np.ndarray</code>
          </td>
          <td><p>numpy matrix containing the state transition matrics of each HMM 
produced by a feature/variable combination.</p></td>
        </tr>
        <tr>
          <td><code>crits</code></td>
          <td>
                <code>np.ndarray</code>
          </td>
          <td><p>Multiple-R value of state probabiliites regressed on target variable
for each HMM model.</p></td>
        </tr>
        <tr>
          <td><code>solo_pval</code></td>
          <td>
                <code>np.ndarray</code>
          </td>
          <td><p>a biased p-value from MCPT testing only considering criteria 
produced by target randomization of a single feature set </p></td>
        </tr>
        <tr>
          <td><code>unbiased_pval</code></td>
          <td>
                <code>np.ndarray</code>
          </td>
          <td><p>an unbiased p-value from MCPT testing using criteria produced 
by target randomization of all feature sets.</p></td>
        </tr>
    </tbody>
  </table>

        <details class="quote">
          <summary>Source code in <code>narrowgate/screeners/hmm/target_link.py</code></summary>
          <table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">screen</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> 
    <span class="n">X</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> 
    <span class="n">y</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span> 
    <span class="n">nreps</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> 
    <span class="n">mcpt_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;complete&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method that performs the target-linked screening of the hidden Markov</span>
<span class="sd">    model states produced by the feature combinations. </span>

<span class="sd">    Executes the Monte Carlo Permutation testing as part of the evaluation </span>

<span class="sd">    ### Warning </span>
<span class="sd">    NaN values must not be present in &#39;X&#39;.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    X :</span>
<span class="sd">        pandas DataFrame of time series features to combine when estimating</span>
<span class="sd">        hidden Markov models.  </span>
<span class="sd">        **Must NOT contain NaN values**</span>
<span class="sd">    y : </span>
<span class="sd">        pandas Series containing the target values to predict.</span>
<span class="sd">    nreps :</span>
<span class="sd">        number of Monte Carlo permutation testing repititions to peform </span>
<span class="sd">    mcpt_type : {&quot;complete&quot;, &quot;cyclic&quot;}</span>
<span class="sd">        Valid options: </span>

<span class="sd">        - **&quot;complete&quot;**</span>
<span class="sd">        - **&quot;cyclic&quot;**</span>

<span class="sd">        Type of permutation to perform on the target variable when evaluating</span>
<span class="sd">        the confidence that a predictor variable&#39;s relationship with the target </span>
<span class="sd">        variable is non-random in nature.  </span>

<span class="sd">        **&quot;complete&quot;**: shuffles the target variable values  </span>

<span class="sd">        **&quot;cyclic&quot;**: used when target variable possesses serial correlation. </span>
<span class="sd">        Chooses a random row and copies the original target variable values in </span>
<span class="sd">        sequence beginning at this row. Excess target values are then &#39;wrapped&#39; </span>
<span class="sd">        to first row in the dataset such that the last original target variable </span>
<span class="sd">        value will be located in the position just prior to the chosen random </span>
<span class="sd">        row.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    state_probs_mat : np.ndarray</span>
<span class="sd">        numpy matrix containing the state probabilities of all possible </span>
<span class="sd">        feature/variable combinations</span>
<span class="sd">    transition_mat : np.ndarray</span>
<span class="sd">        numpy matrix containing the state transition matrics of each HMM </span>
<span class="sd">        produced by a feature/variable combination.</span>
<span class="sd">    crits : np.ndarray</span>
<span class="sd">        Multiple-R value of state probabiliites regressed on target variable</span>
<span class="sd">        for each HMM model.</span>
<span class="sd">    solo_pval : np.ndarray</span>
<span class="sd">        a biased p-value from MCPT testing only considering criteria </span>
<span class="sd">        produced by target randomization of a single feature set </span>
<span class="sd">    unbiased_pval : np.ndarray</span>
<span class="sd">        an unbiased p-value from MCPT testing using criteria produced </span>
<span class="sd">        by target randomization of all feature sets.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Validate the MCPT parameters</span>
    <span class="k">assert</span> <span class="n">nreps</span> <span class="o">&gt;=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">nreps</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nreps</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nreps</span> <span class="o">=</span> <span class="n">nreps</span>

    <span class="k">assert</span> <span class="n">mcpt_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;complete&#39;</span><span class="p">,</span><span class="s1">&#39;cyclic&#39;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mcpt_type</span> <span class="o">=</span> <span class="n">mcpt_type</span>

    <span class="c1"># confirm that X is a DataFrame in order to use</span>
    <span class="c1"># column names when returning results.</span>

    <span class="c1"># confirm that there are no NA values in X</span>
    <span class="k">assert</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">))</span>
    <span class="n">na_mask</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">()</span><span class="o">.</span><span class="n">values</span>
    <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">na_mask</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;NaN&#39; values present in the following &quot;</span> <span class="o">+</span>
            <span class="sa">f</span><span class="s2">&quot;columns: </span><span class="si">{</span><span class="n">X</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">na_mask</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># confirm that &#39;y&#39; is a pandas Series and there are no NA values</span>
    <span class="k">assert</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">))</span>
    <span class="n">na_flag</span> <span class="o">=</span> <span class="n">y</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">na_flag</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;NaN&#39; values present in &#39;y&#39; (target series)&quot;</span><span class="p">)</span>

    <span class="c1"># confirm that X and y have the same number of cases</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">y</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;&#39;X&#39; and &#39;y&#39; must have the same number of observations. &quot;</span> <span class="o">+</span>
            <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> vs. </span><span class="si">{</span><span class="n">y</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

    <span class="c1"># obtain all the column combinations</span>
    <span class="n">cols</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">columns</span>
    <span class="n">col_idx_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cols</span><span class="p">))</span>
    <span class="n">col_idx_combos</span> <span class="o">=</span> \
        <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">col_idx_array</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nvars</span><span class="p">)]</span>
    <span class="n">col_idx_combos</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">col_idx_combos</span><span class="p">)</span>

    <span class="n">combo_cols</span> <span class="o">=</span> \
        <span class="n">np</span><span class="o">.</span><span class="n">split</span><span class="p">(</span>
            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
                <span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">combo</span> <span class="ow">in</span> <span class="n">col_idx_combos</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">combo</span><span class="p">]),</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">col_idx_combos</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">model_cols</span> <span class="o">=</span> <span class="p">[</span><span class="n">combo</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="k">for</span> <span class="n">combo</span> <span class="ow">in</span> <span class="n">combo_cols</span><span class="p">]</span>

    <span class="c1"># construct the hidden Markov model in parallel for each</span>
    <span class="c1"># combination. The &#39;state_probs&#39; will be reused during MCPT</span>
    <span class="c1"># reps as independent variables. The &#39;transition&#39; will be</span>
    <span class="c1"># used for reporting purposes.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state_probs_mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">transition_mat</span> <span class="o">=</span> \
       <span class="n">build_hmm_models_nb</span><span class="p">(</span>
           <span class="n">X</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
           <span class="n">col_idx_combos</span><span class="p">,</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">nstates</span><span class="p">,</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">n_init</span><span class="p">,</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">max_iter</span><span class="p">)</span>

    <span class="c1"># Once the state_probs_mat is created, it&#39;s time to run the</span>
    <span class="c1"># MCPT reps. This will require a call to another parallelized</span>
    <span class="c1"># numba function that will fit many linear regression models.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">crits</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">solo_pval</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">unbiased_pval</span> <span class="o">=</span> \
        <span class="n">mcpt_linreg_nb</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state_probs_mat</span><span class="p">,</span>
            <span class="n">y</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nreps</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mcpt_type</span><span class="p">)</span>

    <span class="c1"># Generate the mcpt report along with the ranking mapper</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_mcpt_report</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ranked_model_mapper</span> <span class="o">=</span> \
        <span class="bp">self</span><span class="o">.</span><span class="n">_generate_mcpt_report</span><span class="p">()</span>

    <span class="c1"># Calculate the means and standard deviations of each</span>
    <span class="c1"># of the variable for each of the states for each of the models</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_means_std_report</span> <span class="o">=</span> \
        <span class="bp">self</span><span class="o">.</span><span class="n">_generate_means_std_report</span><span class="p">(</span>
            <span class="n">X</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
            <span class="n">col_idx_combos</span><span class="p">)</span>

    <span class="c1"># prepare the transition probability matrices as DataFrames for</span>
    <span class="c1"># each of the models created.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_transition_report</span> <span class="o">=</span> \
        <span class="bp">self</span><span class="o">.</span><span class="n">_generate_transition_report</span><span class="p">()</span>

    <span class="c1"># prepare the correlation report for each of the models</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_target_stats_report</span> <span class="o">=</span> \
        <span class="bp">self</span><span class="o">.</span><span class="n">_generate_target_stats_report</span><span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener.mcpt_report" class="doc doc-heading">
mcpt_report


<a href="#narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener.mcpt_report" class="headerlink" title="Permanent link">¤</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">mcpt_report</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Returns the MCPT report as a pandas DataFrame for all evaluated feature 
combinations.</p>
<p>DataFrame includes the following information:</p>
<ul>
<li>independent variables used in the model</li>
<li>Multiple-R of the state probabilities in relation to the target variable</li>
<li>solo p-values</li>
<li>unbiased p-values</li>
</ul>

        <details class="quote">
          <summary>Source code in <code>narrowgate/screeners/hmm/target_link.py</code></summary>
          <table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">mcpt_report</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the MCPT report as a pandas DataFrame for all evaluated feature </span>
<span class="sd">    combinations.</span>

<span class="sd">    DataFrame includes the following information:</span>

<span class="sd">    - independent variables used in the model</span>
<span class="sd">    - Multiple-R of the state probabilities in relation to the target variable</span>
<span class="sd">    - solo p-values</span>
<span class="sd">    - unbiased p-values</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mcpt_report</span>
</code></pre></div>
</td></tr></table>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener.print_model_report" class="doc doc-heading">
print_model_report


<a href="#narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener.print_model_report" class="headerlink" title="Permanent link">¤</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">print_model_report</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">model_rank</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Returns the DataFrame 'report' containing the desired metrics.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>result</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
          </td>
          <td><p>Valid options : 'means','transitions','target'<br />
Attribute from the desired hidden Markov model to retrieve.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>model_rank</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
          </td>
          <td><p>Valid options : 'top','first','second','third'
rank of model whose results to retrieve</p></td>
          <td>
                <code>&#39;top&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>

        <details class="quote">
          <summary>Source code in <code>narrowgate/screeners/hmm/target_link.py</code></summary>
          <table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">print_model_report</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> 
    <span class="n">result</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
    <span class="n">model_rank</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;top&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the DataFrame &#39;report&#39; containing the desired metrics.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    result :</span>
<span class="sd">        Valid options : &#39;means&#39;,&#39;transitions&#39;,&#39;target&#39;  </span>
<span class="sd">        Attribute from the desired hidden Markov model to retrieve.</span>
<span class="sd">    model_rank :</span>
<span class="sd">        Valid options : &#39;top&#39;,&#39;first&#39;,&#39;second&#39;,&#39;third&#39;</span>
<span class="sd">        rank of model whose results to retrieve</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span><span class="p">(</span><span class="n">result</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;means&#39;</span><span class="p">,</span><span class="s1">&#39;transitions&#39;</span><span class="p">,</span><span class="s1">&#39;target&#39;</span><span class="p">])</span>

    <span class="k">if</span> <span class="n">model_rank</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;top&#39;</span><span class="p">,</span><span class="s1">&#39;first&#39;</span><span class="p">]:</span>
        <span class="n">model_rank</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">elif</span> <span class="n">model_rank</span> <span class="o">==</span> <span class="s1">&#39;second&#39;</span><span class="p">:</span>
        <span class="n">model_rank</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">elif</span> <span class="n">model_rank</span> <span class="o">==</span> <span class="s1">&#39;third&#39;</span><span class="p">:</span>
        <span class="n">model_rank</span> <span class="o">=</span> <span class="mi">2</span>

    <span class="k">assert</span><span class="p">(</span><span class="n">model_rank</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">model_rank</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ranked_model_mapper</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;&#39;model_rank&#39; parameter (</span><span class="si">{</span><span class="n">model_rank</span><span class="si">}</span><span class="s2">) exceeds number &quot;</span> <span class="o">+</span>
            <span class="sa">f</span><span class="s2">&quot;of available models (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_ranked_model_mapper</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># subtract one from the &#39;rank&#39; (python zero-index)</span>
        <span class="n">model_rank</span> <span class="o">-=</span> <span class="mi">1</span>

    <span class="n">model_idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ranked_model_mapper</span><span class="p">[</span><span class="n">model_rank</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="s1">&#39;means&#39;</span><span class="p">:</span>
        <span class="n">return_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_means_std_report</span><span class="p">[</span><span class="n">model_idx</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">result</span> <span class="o">==</span> <span class="s1">&#39;transitions&#39;</span><span class="p">:</span>
        <span class="n">return_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_transition_report</span><span class="p">[</span><span class="n">model_idx</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">result</span> <span class="o">==</span> <span class="s1">&#39;target&#39;</span><span class="p">:</span>
        <span class="n">return_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_report</span><span class="p">[</span><span class="n">model_idx</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">return_df</span>
</code></pre></div>
</td></tr></table>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener._generate_mcpt_report" class="doc doc-heading">
_generate_mcpt_report


<a href="#narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener._generate_mcpt_report" class="headerlink" title="Permanent link">¤</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">_generate_mcpt_report</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Generate the MCPT results of the HMM Target Link evaluation.</p>
<p>Includes the following information:</p>
<ul>
<li>independent variables used in the model</li>
<li>Multiple-R of the state probabilities in relation to the target variable</li>
<li>solo p-values</li>
<li>unbiased p-values</li>
</ul>
<p>Also generates a 'mapping' object that can allow the user to easily access
further details about the model given the models 'Multiple-R' rank</p>

  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>_mcpt_report: pd.DataFrame</code></td>
          <td>
          </td>
          <td><p>pandas DataFrame of HMM </p></td>
        </tr>
        <tr>
          <td><code>_ranked_model_mapper: list of tuples</code></td>
          <td>
          </td>
          <td><p>list of integers representing the indices of the variable 
combinations in ranked order according to Multiple-R criterion.    </p></td>
        </tr>
    </tbody>
  </table>

        <details class="quote">
          <summary>Source code in <code>narrowgate/screeners/hmm/target_link.py</code></summary>
          <table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">_generate_mcpt_report</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate the MCPT results of the HMM Target Link evaluation.</span>

<span class="sd">    Includes the following information:</span>

<span class="sd">    - independent variables used in the model</span>
<span class="sd">    - Multiple-R of the state probabilities in relation to the target variable</span>
<span class="sd">    - solo p-values</span>
<span class="sd">    - unbiased p-values</span>

<span class="sd">    Also generates a &#39;mapping&#39; object that can allow the user to easily access</span>
<span class="sd">    further details about the model given the models &#39;Multiple-R&#39; rank</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    _mcpt_report: pd.DataFrame</span>
<span class="sd">        pandas DataFrame of HMM </span>
<span class="sd">    _ranked_model_mapper: list of tuples</span>
<span class="sd">        list of integers representing the indices of the variable </span>
<span class="sd">        combinations in ranked order according to Multiple-R criterion.    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># create a list contaiing the column names for the report</span>
    <span class="c1"># the number of variables</span>
    <span class="n">pred_col_names</span> <span class="o">=</span> \
        <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;Predictor_</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nvars</span><span class="p">)]</span>
    <span class="n">pred_cols_df</span> <span class="o">=</span> \
        <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">model_cols</span><span class="p">,</span>
            <span class="n">columns</span><span class="o">=</span><span class="n">pred_col_names</span><span class="p">)</span>
    <span class="n">stats_col_names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Multiple-R&#39;</span><span class="p">,</span> <span class="s1">&#39;Solo pval&#39;</span><span class="p">,</span> <span class="s1">&#39;Unbiased pval&#39;</span><span class="p">]</span>
    <span class="n">stats_mat</span> <span class="o">=</span> \
        <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">crits</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">solo_pval</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unbiased_pval</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)))</span>
    <span class="n">stats_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">stats_mat</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">stats_col_names</span><span class="p">)</span>

    <span class="c1"># join DataFrames and sort by Multiple-R descending</span>
    <span class="n">mcpt_report</span> <span class="o">=</span> \
        <span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">pred_cols_df</span><span class="p">,</span> <span class="n">stats_df</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
           <span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;Multiple-R&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>

    <span class="c1"># The index from the above DataFrame will be the index</span>
    <span class="c1"># corresponding to the first dimension of the artifacts</span>
    <span class="c1"># returned from &#39;build_hmm_models_nb&#39;.</span>
    <span class="c1"># Convert the index to the list. The index position of</span>
    <span class="c1"># this list will correspond to the rank of the model</span>
    <span class="c1"># in terms of &#39;Multiple-R&#39;.</span>
    <span class="n">ranked_model_mapper</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">mcpt_report</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">mcpt_report</span><span class="p">,</span> <span class="n">ranked_model_mapper</span>
</code></pre></div>
</td></tr></table>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener._generate_means_std_report" class="doc doc-heading">
_generate_means_std_report


<a href="#narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener._generate_means_std_report" class="headerlink" title="Permanent link">¤</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">_generate_means_std_report</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">col_idx_combos</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Generate the reports which provides the basic statistical information 
regarding each of the variables for each of the models created.</p>
<p>This method to called from the 'evaluate' method and organizes the 
information from each model in DataFrame. These DataFrames can then be
retrieved via the 'print_model_results' method.</p>

        <details class="quote">
          <summary>Source code in <code>narrowgate/screeners/hmm/target_link.py</code></summary>
          <table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">_generate_means_std_report</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> 
    <span class="n">data</span> <span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> 
    <span class="n">col_idx_combos</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate the reports which provides the basic statistical information </span>
<span class="sd">    regarding each of the variables for each of the models created.</span>

<span class="sd">    This method to called from the &#39;evaluate&#39; method and organizes the </span>
<span class="sd">    information from each model in DataFrame. These DataFrames can then be</span>
<span class="sd">    retrieved via the &#39;print_model_results&#39; method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">nmodels</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model_cols</span><span class="p">)</span>

    <span class="n">means</span><span class="p">,</span> <span class="n">stds</span> <span class="o">=</span> \
        <span class="n">calculate_model_var_means</span><span class="p">(</span>
            <span class="n">data</span><span class="p">,</span>
            <span class="n">col_idx_combos</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state_probs_mat</span><span class="p">)</span>

    <span class="k">assert</span><span class="p">(</span><span class="n">means</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">nmodels</span><span class="p">)</span>

    <span class="n">mean_std</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">imodel</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nmodels</span><span class="p">):</span>
        <span class="n">mean_mat</span> <span class="o">=</span> <span class="n">means</span><span class="p">[</span><span class="n">imodel</span><span class="p">]</span>
        <span class="n">index_names</span> <span class="o">=</span> \
            <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;state_</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">mean_mat</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span>
        <span class="n">col_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_cols</span><span class="p">[</span><span class="n">imodel</span><span class="p">]</span>
        <span class="n">mean_df</span> <span class="o">=</span> \
            <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
                <span class="n">mean_mat</span><span class="p">,</span>
                <span class="n">columns</span><span class="o">=</span><span class="n">col_names</span><span class="p">,</span>
                <span class="n">index</span><span class="o">=</span><span class="n">index_names</span><span class="p">)</span>

        <span class="n">std_mat</span> <span class="o">=</span> <span class="n">stds</span><span class="p">[</span><span class="n">imodel</span><span class="p">]</span>
        <span class="n">std_df</span> <span class="o">=</span> \
            <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
                <span class="n">std_mat</span><span class="p">,</span>
                <span class="n">columns</span><span class="o">=</span><span class="n">col_names</span><span class="p">,</span>
                <span class="n">index</span><span class="o">=</span><span class="n">index_names</span><span class="p">)</span>

        <span class="n">df</span> <span class="o">=</span> \
            <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
                <span class="n">mean_df</span><span class="p">,</span> <span class="n">std_df</span><span class="p">,</span>
                <span class="n">left_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">suffixes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;_mean&quot;</span><span class="p">,</span> <span class="s2">&quot;_std&quot;</span><span class="p">])</span>

        <span class="n">mean_std</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="nb">sorted</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)])</span>

    <span class="k">return</span> <span class="n">mean_std</span>
</code></pre></div>
</td></tr></table>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener._generate_transition_report" class="doc doc-heading">
_generate_transition_report


<a href="#narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener._generate_transition_report" class="headerlink" title="Permanent link">¤</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">_generate_transition_report</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>The raw transition matrices are transformed into DataFrames for better 
readability.</p>
<p>The value in each cell represents the probability the model 
transitions from the row state to the column state: <br />
<strong>Row State -&gt; Column State</strong>  </p>
<p>As a result, the sum of the values in each ROW should equal <strong>1</strong>.</p>

        <details class="quote">
          <summary>Source code in <code>narrowgate/screeners/hmm/target_link.py</code></summary>
          <table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">_generate_transition_report</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The raw transition matrices are transformed into DataFrames for better </span>
<span class="sd">    readability.</span>

<span class="sd">    The value in each cell represents the probability the model </span>
<span class="sd">    transitions from the row state to the column state:   </span>
<span class="sd">    **Row State -&gt; Column State**  </span>

<span class="sd">    As a result, the sum of the values in each ROW should equal **1**.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">nmodels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transition_mat</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;state_</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nstates</span><span class="p">)]</span>

    <span class="n">transition_report_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">imodel</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nmodels</span><span class="p">):</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">transition_mat</span><span class="p">[</span><span class="n">imodel</span><span class="p">],</span>
                <span class="n">columns</span> <span class="o">=</span> <span class="n">names</span><span class="p">,</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">names</span><span class="p">)</span>
        <span class="n">transition_report_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">transition_report_list</span>
</code></pre></div>
</td></tr></table>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener._generate_target_stats_report" class="doc doc-heading">
_generate_target_stats_report


<a href="#narrowgate.screeners.hmm.target_link.HMMTargetLinkScreener._generate_target_stats_report" class="headerlink" title="Permanent link">¤</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">_generate_target_stats_report</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>This method prepares a report (DataFrame) for each state of each model 
which contains the following information:</p>
<ul>
<li>Percent<br />
the percentage of cases in which the designated state has the highest 
probability.</li>
<li>Correlation<br />
the correlation coefficient between the target and the membership 
probability for the designated state</li>
<li>Target Mean<br />
the mean of the target when the designated state has the highest 
membership probability</li>
<li>Target Standard Deviation<br />
the standard deviation of the target when the designated state has the 
highest membership probability</li>
</ul>

        <details class="quote">
          <summary>Source code in <code>narrowgate/screeners/hmm/target_link.py</code></summary>
          <table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">_generate_target_stats_report</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method prepares a report (DataFrame) for each state of each model </span>
<span class="sd">    which contains the following information:</span>

<span class="sd">    * Percent  </span>
<span class="sd">    the percentage of cases in which the designated state has the highest </span>
<span class="sd">    probability.</span>
<span class="sd">    * Correlation  </span>
<span class="sd">    the correlation coefficient between the target and the membership </span>
<span class="sd">    probability for the designated state</span>
<span class="sd">    * Target Mean  </span>
<span class="sd">    the mean of the target when the designated state has the highest </span>
<span class="sd">    membership probability</span>
<span class="sd">    * Target Standard Deviation  </span>
<span class="sd">    the standard deviation of the target when the designated state has the </span>
<span class="sd">    highest membership probability</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">nmodels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_probs_mat</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">nstates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_probs_mat</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

    <span class="n">target_stats_mat</span> <span class="o">=</span> \
        <span class="n">calculate_model_target_stats</span><span class="p">(</span>
            <span class="n">target</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state_probs_mat</span><span class="p">)</span>

    <span class="n">column_names</span> <span class="o">=</span> \
        <span class="p">[</span><span class="s1">&#39;Percent&#39;</span><span class="p">,</span>
         <span class="s1">&#39;Correlation&#39;</span><span class="p">,</span>
         <span class="s1">&#39;Target mean&#39;</span><span class="p">,</span>
         <span class="s1">&#39;Target StdDev&#39;</span><span class="p">]</span>
    <span class="n">index_names</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;State </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nstates</span><span class="p">)]</span>

    <span class="n">target_stats_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">imodel</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nmodels</span><span class="p">):</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
                <span class="n">target_stats_mat</span><span class="p">[</span><span class="n">imodel</span><span class="p">],</span>
                <span class="n">columns</span> <span class="o">=</span> <span class="n">column_names</span><span class="p">,</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index_names</span><span class="p">)</span>
        <span class="n">target_stats_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">target_stats_list</span>
</code></pre></div>
</td></tr></table>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../fsca_transformer/" class="md-footer__link md-footer__link--prev" aria-label="Previous: FSCATransformer" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              FSCATransformer
            </div>
          </div>
        </a>
      
      
        
        <a href="../hmm_memory/" class="md-footer__link md-footer__link--next" aria-label="Next: HMMMemoryScreener" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              HMMMemoryScreener
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.bd0b6b67.min.js"}</script>
    
    
      <script src="../../assets/javascripts/bundle.467223ff.min.js"></script>
      
    
  </body>
</html>